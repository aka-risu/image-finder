{"version":3,"sources":["webpack:///./refs.js","webpack:///./apiService.js","webpack:///./loadMorebtn.js","webpack:///./index.js","webpack:///./modalTmp.hbs","webpack:///./imgTemplate.hbs"],"names":["galleryRef","document","querySelector","inputRef","photoRef","PixabayApiService","this","searchQuary","page","position","fetchImages","url","BASE_URL","fetch","response","json","hits","incrementPage","resetPage","scrollTo","window","top","behavior","newQuery","loadMoreBtn","btnRef","hidden","enable","disabled","disable","show","classList","remove","hide","add","pixabayApiService","LoadMoreBtn","then","images","refs","insertAdjacentHTML","imgTemplate","createImagesMarkup","clearPage","innerHTML","addEventListener","debounce","e","preventDefault","query","target","value","handleInput","scrollTop","pageYOffset","basicLightbox","dataset","source","onClose","Handlebars","module","exports","template","container","depth0","helpers","partials","data","escapeExpression","lambda","alias1","alias2","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","stack1","nullContext","program","noop"],"mappings":"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","file":"main.8c09bf9a448ffd09131e.js","sourcesContent":["export default {\r\n    galleryRef: document.querySelector('.gallery'),\r\n    inputRef: document.querySelector(\".search-form\"),\r\n    \r\n    photoRef: document.querySelector(\".photo-card\"),\r\n}\r\n","\r\nconst API_KEY = \"11025352-e441425a1749dc1227f4601c8\";\r\nconst BASE_URL = 'https://pixabay.com/api';\r\n\r\nexport default class PixabayApiService {\r\n    constructor() {\r\n        this.searchQuary = \"\";\r\n        this.page = 1;\r\n        this.position = 0;\r\n    }\r\n\r\n    async fetchImages() {\r\n        const url = `${BASE_URL}/?image_type=photo&orientation=horizontal&q=${this.searchQuary}&page=${this.page}&per_page=12&key=${API_KEY}`\r\n        const response = await fetch(url);\r\n        const { hits } = await response.json();\r\n        this.incrementPage();\r\n        return hits;\r\n    }\r\n\r\n    incrementPage() {\r\n        this.page += 1;\r\n    }\r\n\r\n    resetPage() {\r\n        this.page = 1;\r\n    }\r\n\r\n    set query(newQuery) {\r\n        this.searchQuary = newQuery;\r\n    }\r\n\r\n    scrollTo() {\r\n        window.scrollTo({\r\n        //  top: this.position,\r\n        top: (this.page-1) * 500,\r\n        behavior: \"smooth\"\r\n    })\r\n    }\r\n}","export default class loadMoreBtn {\r\n    constructor() {\r\n        this.btnRef = document.querySelector(\".loadMore\");\r\n        this.hidden = false\r\n}\r\n    enable(){\r\n    this.btnRef.disabled = false;\r\n    \r\n    }\r\n\r\n    disable() {\r\n        this.btnRef.disabled = true;\r\n    }\r\n\r\n    show() {\r\n        this.btnRef.classList.remove(\"loadMore--notShown\");\r\n    }\r\n    hide() {\r\n        this.btnRef.classList.add(\"loadMore--notShown\");\r\n    }\r\n\r\n}","// import renderMarkup from \"./markup\"\n// import markup from \"./markup.hbs\"\nimport './styles.css';\nimport refs from './refs';\nimport './apiService';\nimport PixabayApiService from \"./apiService\";\nimport imgTemplate from \"./imgTemplate.hbs\";\nimport debounce from \"lodash.debounce\";\nimport LoadMoreBtn from \"./loadMorebtn\";\nimport * as basicLightbox from 'basiclightbox';\nimport modalTmp from \"./modalTmp.hbs\";\nimport \"../node_modules/basiclightbox/dist/basicLightbox.min.css\"\n\nconst pixabayApiService = new PixabayApiService();\nconst loadMoreBtn = new LoadMoreBtn();\n\nrefs.inputRef.addEventListener('input', (debounce((e => handleInput(e)), 500)));\nloadMoreBtn.btnRef.addEventListener('click', fetchImages);\n\nopenModal()\npixabayApiService.query = \"cat\"\nfetchImages()\nfunction handleInput(e) {\n    e.preventDefault()\n\n    pixabayApiService.query = e.target.value\n\n    if (e.target.value === \"\") {\n        loadMoreBtn.hide();\n        clearPage();\n        return;\n    }\n    pixabayApiService.resetPage()\n    clearPage()\n    fetchImages()\n        \n    loadMoreBtn.show()\n    \n}\n\nfunction fetchImages() {\n    loadMoreBtn.disable()\n  return pixabayApiService.fetchImages().then(images => {\n      createImagesMarkup(images)\n      pixabayApiService.scrollTo()\n      loadMoreBtn.enable()\n      })\n}\nfunction createImagesMarkup(images) {\n    refs.galleryRef.insertAdjacentHTML('beforeend', imgTemplate(images));\n    }\nfunction clearPage() {\n        refs.galleryRef.innerHTML = \"\";\n}\n\n// const optionScroll = {\n// position: body.scrollTop\n// }\nfunction openModal() {\n    refs.galleryRef.addEventListener('click', (e) => {\n     let scrollTop = window.pageYOffset ;\n        basicLightbox.create(`<img width=\"1400\" height=\"900\" src=\"${e.target.dataset.source}\">`,\n            {\n                onClose: () => {\n                    window.scrollTo({\n                   top: scrollTop\n        })\n        }  \n        }).show();\n       }\n    )\n}\n    // function handleInput(e) {\n    //     e.preventDefault()\n    //     const searchValue = e.target.value\n    //     if (searchValue === \"\") {\n    //         clearPage()\n    //         refs.loadMore.classList.add(\"loadMore--notShown\");\n    //         return\n    //     }\n   \n    //     clearPage()\n    //     let page = 1\n    //    console.log(page)\n    //     renderImg(searchValue)\n    \n    //     refs.loadMore.addEventListener(\"click\", (e) => {\n        \n    //         console.log(page)\n    //         showMoreImages(e, searchValue, page)\n    //     })\n\n    //     function showMoreImages(e, searchValue, page) {\n    //         e.preventDefault()\n        \n        \n    //         console.log(page)\n    //         // refs.loadMore.disabled = true;\n    //         renderImg(searchValue, page)\n    //         // return page;\n    //     }\n    // // .then(refs.loadMore.disabled = false)\n    //     function renderImg(searchValue, page = 1) {\n    //         console.log(page)\n    //         const position = (page - 1) * 670;\n    //         // refs.loadMore.disabled = true;\n        \n    //       getImages(searchValue, page)\n    //             .then(obj => refs.galleryRef.insertAdjacentHTML('beforeend', imgTemplate(obj.hits)))\n    //           .then(function () {\n    //               page += 1;\n    //               console.log(page);\n    //                 refs.loadMore.classList.remove(\"loadMore--notShown\");\n    //                 window.scrollTo({\n    //                     top: position,\n    //                     behavior: \"smooth\"\n    //                 })\n    // //                 document.querySelector(\".photo_link\").addEventListener('click', function () {\n    // //                     const instance = basicLightbox.create(`\n    // // \t<img src=\"\"></img>\n    // // `)\n    // //                 })\n    //                 // refs.photoRef.addEventListener('click', console.log(\"Hey\"))\n    //             })\n        \n    //     }\n    // }\n\n","var Handlebars = require(\"../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<img class=\\\"photo-card__img\\\" src=\\\"\"\n    + container.escapeExpression(container.lambda(depth0, depth0))\n    + \"\\\" alt=\\\"\\\" />\";\n},\"useData\":true});","var Handlebars = require(\"../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var alias1=container.lambda, alias2=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<li class=\\\"photo-card\\\">\\r\\n    <div>\\r\\n        <a href=\\\"#\\\" class=\\\"photo_link\\\"><img class=\\\"photo-card__img\\\" src=\\\"\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"webformatURL\") : depth0), depth0))\n    + \"\\\" alt=\\\"\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"tags\") : depth0), depth0))\n    + \"\\\"\\r\\n                data-source=\\\"\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"largeImageURL\") : depth0), depth0))\n    + \"\\\" width=\\\"100%\\\" /></a>\\r\\n        <div class=\\\"stats\\\" data-source=\\\"\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"largeImageURL\") : depth0), depth0))\n    + \"\\\">\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons md-18\\\">thumb_up</i>\\r\\n                \"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"likes\") : depth0), depth0))\n    + \"\\r\\n            </p>\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons md-18\\\">visibility</i>\\r\\n                \"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"views\") : depth0), depth0))\n    + \"\\r\\n            </p>\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons md-18\\\">comment</i>\\r\\n                \"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"comments\") : depth0), depth0))\n    + \"\\r\\n            </p>\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons md-18\\\">cloud_download</i>\\r\\n                \"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"downloads\") : depth0), depth0))\n    + \"\\r\\n            </p>\\r\\n        </div>\\r\\n    </div>\\r\\n</li>\\r\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":27,\"column\":9}}})) != null ? stack1 : \"\");\n},\"useData\":true});"],"sourceRoot":""}