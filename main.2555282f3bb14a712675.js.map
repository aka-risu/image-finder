{"version":3,"sources":["webpack:///./refs.js","webpack:///./apiService.js","webpack:///./loadMorebtn.js","webpack:///./position.js","webpack:///./index.js","webpack:///./imgTemplate.hbs"],"names":["galleryRef","document","querySelector","inputRef","photoRef","bodyRef","searchBtnRef","searchForm","PixabayApiService","this","searchQuary","page","typeOfImage","fetchImages","url","BASE_URL","fetch","response","json","hits","incrementPage","resetPage","newQuery","loadMoreBtn","btnRef","hidden","enable","disabled","disable","show","classList","remove","hide","add","position","currentPosition","scrollToBottom","window","scrollTo","top","behavior","scrollToCurrent","setCurrentPosition","pageYOffset","pixabayApiService","LoadMoreBtn","then","images","length","refs","insertAdjacentHTML","imgTemplate","createImagesMarkup","clearPage","innerHTML","addEventListener","e","preventDefault","query","currentTarget","elements","value","target","basicLightbox","dataset","source","Handlebars","module","exports","template","container","depth0","helpers","partials","data","alias1","lambda","alias2","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","stack1","nullContext","program","noop"],"mappings":"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","file":"main.2555282f3bb14a712675.js","sourcesContent":["export default {\r\n    galleryRef: document.querySelector('.gallery'),\r\n    inputRef: document.querySelector(\".search-form\"),\r\n    photoRef: document.querySelector(\".photo-card\"),\r\n    bodyRef: document.querySelector('body'),\r\n    searchBtnRef: document.querySelector('.search-button'),\r\n    searchForm: document.querySelector('.search-form'),\r\n}\r\n","\r\nconst API_KEY = \"11025352-e441425a1749dc1227f4601c8\";\r\nconst BASE_URL = 'https://pixabay.com/api';\r\n\r\nexport default class PixabayApiService {\r\n    constructor() {\r\n        this.searchQuary = \"\";\r\n        this.page = 1;\r\n       this.typeOfImage = \"photo\"\r\n    }\r\n\r\n    async fetchImages() {\r\n        const url = `${BASE_URL}/?image_type=${this.typeOfImage}&orientation=horizontal&q=${this.searchQuary}&page=${this.page}&per_page=12&key=${API_KEY}`\r\n        const response = await fetch(url);\r\n        const { hits } = await response.json();\r\n        this.incrementPage();\r\n        return hits;\r\n    }\r\n\r\n    incrementPage() {\r\n        this.page += 1;\r\n    }\r\n\r\n    resetPage() {\r\n        this.page = 1;\r\n    }\r\n\r\n    set query(newQuery) {\r\n        this.searchQuary = newQuery;\r\n    }\r\n\r\n    // scrollTo() {\r\n    //     window.scrollTo({\r\n    //     //  top: this.position,\r\n    //     top: (this.page-1) * 500,\r\n    //     behavior: \"smooth\"\r\n    // })\r\n    // }\r\n}","export default class loadMoreBtn {\r\n    constructor() {\r\n        this.btnRef = document.querySelector(\".loadMore\");\r\n        this.hidden = false\r\n}\r\n    enable(){\r\n    this.btnRef.disabled = false;\r\n    \r\n    }\r\n\r\n    disable() {\r\n        this.btnRef.disabled = true;\r\n    }\r\n\r\n    show() {\r\n        this.btnRef.classList.remove(\"loadMore--notShown\");\r\n    }\r\n    hide() {\r\n        this.btnRef.classList.add(\"loadMore--notShown\");\r\n    }\r\n\r\n}","const position = {\r\n    currentPosition: 0,\r\n    scrollToBottom() {\r\n        window.scrollTo({\r\n        top: this.currentPosition + 800,\r\n        behavior: \"smooth\"\r\n    })\r\n    },\r\n   \r\n    scrollToCurrent() {\r\n        window.scrollTo({\r\n        top: this.currentPosition,\r\n    })\r\n    },\r\n    setCurrentPosition() {\r\n        this.currentPosition = window.pageYOffset;\r\n    },\r\n\r\n}\r\nexport default position\r\n// function scrollTo() {\r\n//         window.scrollTo({\r\n//         //  top: this.position,\r\n//         top: (this.page-1) * 500,\r\n//         behavior: \"smooth\"\r\n//     })\r\n// }\r\n    \r\n// let scrollTop = window.pageYOffset ;","import './styles.css';\nimport refs from './refs';\nimport './apiService';\nimport PixabayApiService from \"./apiService\";\nimport imgTemplate from \"./imgTemplate.hbs\";\nimport debounce from \"lodash.debounce\";\nimport LoadMoreBtn from \"./loadMorebtn\";\nimport * as basicLightbox from 'basiclightbox';\n\nimport \"../node_modules/basiclightbox/dist/basicLightbox.min.css\"\nimport position from \"./position\";\n\n\nconst pixabayApiService = new PixabayApiService();\nconst loadMoreBtn = new LoadMoreBtn();\n\n// refs.inputRef.addEventListener('input', debounce(e => handleInput(e), 500));\nloadMoreBtn.btnRef.addEventListener('click', fetchImages);\nrefs.searchForm.addEventListener('submit', handleInput);\nrefs.galleryRef.addEventListener('click', openModal);\n\n\nfunction handleInput(e) {\n    e.preventDefault()\n\n    pixabayApiService.query = e.currentTarget.elements.query.value\n    pixabayApiService.typeOfImage = e.target.elements.typeOfImage.value\n    if (e.target.value === \"\") {\n        loadMoreBtn.hide();\n        clearPage();\n        refs.galleryRef.classList.remove('not-found')\n        return;\n    }\n    pixabayApiService.resetPage()\n    refs.galleryRef.classList.remove('not-found')\n    clearPage()\n    fetchImages()\n       \n}\n\nfunction fetchImages() {\n    loadMoreBtn.disable()\n    return pixabayApiService.fetchImages().then(images => {\n        if (images.length === 0) {\n            loadMoreBtn.hide()\n            refs.galleryRef.classList.add('not-found')\n            refs.galleryRef.insertAdjacentHTML(\"afterbegin\", `<p class=\"no-result-text\">No results :(</p>`)\n            return\n            }\n\n    createImagesMarkup(images)\n    position.setCurrentPosition()\n    position.scrollToBottom()\n    loadMoreBtn.show()\n    loadMoreBtn.enable()\n      })\n}\nfunction createImagesMarkup(images) {\n    refs.galleryRef.insertAdjacentHTML('beforeend', imgTemplate(images));\n    }\nfunction clearPage() {\n        refs.galleryRef.innerHTML = \"\";\n}\n\nfunction openModal(e) {\n    e.preventDefault()\n    return basicLightbox.create(`<img width=\"1400\" height=\"900\" src=\"${e.target.dataset.source}\">`).show();\n}","var Handlebars = require(\"../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var alias1=container.lambda, alias2=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<li class=\\\"photo-card\\\">\\r\\n    <div>\\r\\n        <a href=\\\"#\\\" class=\\\"photo_link\\\"><img class=\\\"photo-card__img\\\" src=\\\"\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"webformatURL\") : depth0), depth0))\n    + \"\\\" alt=\\\"\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"tags\") : depth0), depth0))\n    + \"\\\"\\r\\n                data-source=\\\"\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"largeImageURL\") : depth0), depth0))\n    + \"\\\" width=\\\"100%\\\" /></a>\\r\\n        <div class=\\\"stats\\\">\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons md-18\\\">thumb_up</i>\\r\\n                \"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"likes\") : depth0), depth0))\n    + \"\\r\\n            </p>\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons md-18\\\">visibility</i>\\r\\n                \"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"views\") : depth0), depth0))\n    + \"\\r\\n            </p>\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons md-18\\\">comment</i>\\r\\n                \"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"comments\") : depth0), depth0))\n    + \"\\r\\n            </p>\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons md-18\\\">cloud_download</i>\\r\\n                \"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"downloads\") : depth0), depth0))\n    + \"\\r\\n            </p>\\r\\n        </div>\\r\\n    </div>\\r\\n</li>\\r\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":27,\"column\":9}}})) != null ? stack1 : \"\");\n},\"useData\":true});"],"sourceRoot":""}